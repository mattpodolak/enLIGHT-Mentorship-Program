{% extends "dashboard.html" %}
{% block dash_content %}
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <!--
    <script type=text/javascript>
        $(function() {
            $(".expand-row").click(function () {
                $(this).next("tr").slideToggle(1000);
            });  
        });
    </script>
    --> 
    <div class="body-content-container-white">
        <div class="feature-image">
            <div class="feature-title">
                <h1><strong><strong><strong>NEW MENTORS AVAILABLE</strong></strong></strong></h1>
                <br>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse turpis purus, volutpat vel pulvinar a, auctor ut sem.</p>
            </div>
        </div>

        <div class="posting-container">
            <div class="posting-title">
                <h1><strong><strong><strong></strong>NEW MENTORS IN CANADA</strong></strong></strong></h1>
            </div>

            {% if mentors %}
            {% for mentor in mentors %}
            <div class="posting-template rounded shadow-lg">
                <div class="posting-info">
                    <h2><strong>{{mentor.first_name}} {{mentor.last_name}}</strong></h2>
                    <p><strong>{{mentor.position}}</strong> @ {{mentor.company}}</p>
                    <br>
                    <details>
                        <summary><strong>{{mentor.about_me}} &nbsp;</strong>
                            <svg class="opacity-75 w-4 h-4 -mr-1" xmlns="http://www.w3.org/2000/svg" viewBox="5 -4 20 20">
                                <path 
                                    fill="#33cc33"
                                    d="M12.95 10.707l.707-.707L8 4.343 6.586 5.757 10.828 10l-4.242 4.243L8 15.657l4.95-4.95z"/>
                            </svg>
                        </summary>
                        <br>
                        {% set skills = mentor.skill.split(',')%}
                        {% for skill in skills %}
                        <div class="skills-bubble">
                            {{skill}}
                        </div>
                        {% endfor %}
                        <br>
                        <p>EMAIL: {{mentor.email}}</p>
                        <p>AVAILABILITY: {{mentor.avail}}</p>
                        {% if current_user.is_admin() %}
                        <p>ID: {{mentor.id}}</p>
                            {% if mentor.mentees %}
                            <p> MENTEES:
                                {% for mentee in mentor.mentees %}
                                    {{mentee.company}},
                                {% endfor %}
                            </p>
                            {% else %}
                            <p>MENTEES: NONE</p>
                            {% endif %}
                        <p><a href="{{ url_for('del_user', userId=mentor.email_hash) }}">Delete Acct</a></p>
                        {% endif %}
                    </details> 
                </div>
                <div class="posting-updates">
                    {% if menteeInfo %}
                        {% if mentor.mentee == menteeInfo %}
                            <a href="{{ url_for('del_mentorpref', mentorId=mentor.email_hash) }}">Remove Shortlist</a>
                        {% else %}
                            <a href="{{ url_for('acc_mentorpref', mentorId=mentor.email_hash) }}"><img src="../static/heart_icon.png"></a>
                        {% endif %}
                    {% elif cohortInfo %}
                        {% if mentor.cohort == cohortInfo %}
                            <a href="{{ url_for('del_mentorpref', mentorId=mentor.email_hash) }}">Remove Shortlist</a>
                        {% else %}
                            <a href="{{ url_for('acc_mentorpref', mentorId=mentor.email_hash) }}"><img src="../static/heart_icon.png"></a>
                        {% endif %}
                    {% else %}
                        <a href="{{ url_for('acc_mentorpref', mentorId=mentor.email_hash) }}"><img src="../static/heart_icon.png"></a>
                    {% endif %}
                    <p>Posted today</p>
                </div>
            </div>
            {% endfor %}
            {% endif %}

        </div>


      <div class="mentor_list_container">
          <table width="100%" class="mentor_rtable">
                {% if mentors %}
                    <thead>
                        {% if current_user.is_admin() %}
                            <th width="11.1%">ID</th>
                            <th width="11.1%">Delete</th>
                            <th width="11.1%">Mentees</th>
                            <th width="11.1%">Email</th>
                            <th width="11.1%">NAME</th>
                            <th width="11.1%">Work Title</th>
                            <th width="11.1%">Availability</th>
                            <th width="11.1%">Skillset</th>
                            <th width="11.1%">Favourite</th>
                        {% else %}
                            <th width="20%">NAME</th>
                            <th width="20%">Work Title</th>
                            <th width="20%">Availability</th>
                            <th width="20%">Skillset</th>
                            <th width="20%">Favourite</th>
                        {% endif %}
                    </thead>
                    <tbody>
                    {% for mentor in mentors %}
                        <tr class="expand-row">
                            {% if current_user.is_admin() %}
                                <td>{{mentor.id}}</td>
                                <td><a href="{{ url_for('del_user', userId=mentor.email_hash) }}">Delete Acct</a></td>
                                {% if mentor.mentees %}
                                    <td>{% for mentee in mentor.mentees %}
                                            {{mentee.company}},
                                        {% endfor %}
                                    </td>
                                {% else %}
                                    <td>NONE</td>
                                {% endif %}
                                <td>{{mentor.email}}</td>
                            {% endif %}
                            <td>{{mentor.first_name}} {{mentor.last_name}}</td>
                            <td>{{mentor.position}} @ {{mentor.company}}</td>
                            <td>{{mentor.avail}}</td>
                            <td>{{mentor.skill}}</td>
                            <td>
                                <!--insert star/heart icon instead of shortlist text that changes to filled if shortlisted-->
                                {% if menteeInfo %}
                                    {% if mentor.mentee == menteeInfo %}
                                        <a href="{{ url_for('del_mentorpref', mentorId=mentor.email_hash) }}">Remove Shortlist</a>
                                    {% else %}
                                        <a href="{{ url_for('acc_mentorpref', mentorId=mentor.email_hash) }}"><img src="../static/heart_icon.png"></a>
                                    {% endif %}
                                {% elif cohortInfo %}
                                    {% if mentor.cohort == cohortInfo %}
                                        <a href="{{ url_for('del_mentorpref', mentorId=mentor.email_hash) }}">Remove Shortlist</a>
                                    {% else %}
                                        <a href="{{ url_for('acc_mentorpref', mentorId=mentor.email_hash) }}"><img src="../static/heart_icon.png"></a>
                                    {% endif %}
                                {% else %}
                                    <a href="{{ url_for('acc_mentorpref', mentorId=mentor.email_hash) }}"><img src="../static/heart_icon.png"></a>
                                {% endif %}
                          </td>
                      </tr>
                    <tr style="display: none; background-color: #F4F7F9;" >
                        {% if current_user.is_admin() %}
                        <td colspan="8" style="padding: 14px 20%;">
                            <h2>{{mentor.first_name}} {{mentor.last_name}}</h2><br>
                            {{mentor.about_me}}
                        </td>
                        {% else %}
                        <td colspan="5" style="padding: 14px 20%;">
                            <h2>{{mentor.first_name}} {{mentor.last_name}}</h2><br>
                            {{mentor.about_me}}
                        </td>
                        {% endif %}
                    </tr>
                {% endfor %}
            </tbody>
            {% endif %}
        </table>
        </div>
    </div>
{% endblock %}